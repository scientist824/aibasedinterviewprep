{% extends "base.html" %}

{% block title %}Interview Details - Admin{% endblock %}

{% block content %}
<h2 class="mb-4">Interview Details</h2>

<div class="card mb-4">
    <div class="card-header bg-primary text-white">
        <h5 class="mb-0">Interview Information</h5>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-6">
                <p><strong>User:</strong> {{ interview.username }}</p>
                <p><strong>Type:</strong> {{ interview.interview_type }}</p>
                <p><strong>Status:</strong> 
                    <span class="badge bg-{{ 'success' if interview.status == 'Completed' else 'warning' }}">
                        {{ interview.status }}
                    </span>
                </p>
            </div>
            <div class="col-md-6">
                <p><strong>Started:</strong> {{ interview.started_at }}</p>
                <p><strong>Completed:</strong> {{ interview.completed_at or 'N/A' }}</p>
                <p><strong>Total Questions:</strong> {{ interview.total_questions }}</p>
            </div>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <h5>Question Responses ({{ responses|length }})</h5>
    </div>
    <div class="card-body">
        {% for response in responses %}
        <div class="card mb-3">
            <div class="card-body">
                <h6 class="card-title">{{ response.question_text }}</h6>
                <p class="text-muted"><strong>User Answer:</strong></p>
                <p class="border p-2 bg-light">{{ response.user_answer }}</p>
                <div class="row">
                    <div class="col-md-4">
                        <p><strong>Score:</strong> 
                            <span class="badge bg-{{ 'success' if response.score >= 70 else 'warning' if response.score >= 50 else 'danger' }}">
                                {{ "%.1f"|format(response.score) }}%
                            </span>
                        </p>
                    </div>
                    <div class="col-md-8">
                        <p><strong>Feedback:</strong> {{ response.feedback }}</p>
                    </div>
                </div>
                <p class="text-muted"><small>Answered at: {{ response.answered_at }}</small></p>
            </div>
        </div>
        {% endfor %}
        
        <div class="mt-3">
            <a href="{{ url_for('admin_results') }}" class="btn btn-secondary">Back to Results</a>
        </div>
    </div>
</div>
{% endblock %}
